[gd_scene load_steps=4 format=3 uid="uid://o42mec4yynmq"]

[ext_resource type="PackedScene" uid="uid://dutxi7w8onure" path="res://models/props/raw/IndustrialSmallLight.blend" id="1_dchy5"]

[sub_resource type="GDScript" id="GDScript_dchy5"]
script/source = "extends Node3D

# Store reference to the material
var light_material: BaseMaterial3D

# Called when the node enters the scene tree for the first time.
func _ready() -> void:
	# Find the MeshInstance3D node and get its material
	# Adjust the path to match your scene structure
	var mesh_instance = $IndustiralLightSmall
	if mesh_instance and mesh_instance.get_surface_override_material(0):
		light_material = mesh_instance.get_surface_override_material(0)
	elif mesh_instance and mesh_instance.mesh.surface_get_material(0):
		# If no override material, duplicate the mesh material so we can modify it
		light_material = mesh_instance.mesh.surface_get_material(0).duplicate()
		mesh_instance.set_surface_override_material(0, light_material)
	
	# Start with emission off
	turn_emission_off()

func turn_emission_on():
	if light_material:
		light_material.emission_enabled = true
		# You can also set the emission color and energy
		light_material.emission = Color.WHITE  # Set your desired emission color
		light_material.emission_energy = 1.0   # Set emission intensity
		print(\"Light emission turned ON\")

func turn_emission_off():
	if light_material:
		light_material.emission_enabled = false
		print(\"Light emission turned OFF\")

func toggle_emission():
	if light_material:
		if light_material.emission_enabled:
			turn_emission_off()
		else:
			turn_emission_on()

# Example usage in _process or input handling
func _process(_delta: float) -> void:
	# Example: Press 'E' to toggle emission
	if Input.is_action_just_pressed(\"walk\"):
		toggle_emission()
"

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_noio5"]
albedo_color = Color(0, 0, 0, 1)
emission = Color(0.8506773, 0.22682545, 1, 1)
emission_energy_multiplier = 3.0

[node name="IndustrialSmallLight" instance=ExtResource("1_dchy5")]
script = SubResource("GDScript_dchy5")

[node name="IndustiralLightSmall" parent="." index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_noio5")
